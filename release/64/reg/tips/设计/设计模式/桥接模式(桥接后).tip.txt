桥接模式


侯捷老师主讲C++设计模式教程：第7讲，桥模式 https://v.ixigua.com/MB96Jh6/

大师 这个讲的挺好 抽象部分和实现部分终于理解了

#include "qiaojie.h"

qiaojie::qiaojie()
{

}

class MessagerImp{
public:
    virtual void PlaySound() = 0;
    virtual void DrawShape() = 0;
    virtual void WriteText() = 0;
    virtual void Connect()=0;

    virtual ~MessagerImp(){}
};


class Messager{
protected:
    MessagerImp *messagerImp;//...
public:
    virtual void Login(string username, string password) = 0;
    virtual void SendMessage(string message) = 0;
    virtual void SendPicture(Image image) = 0;

    virtual ~Messager(){}
};



//平台实现 n
class PCMessageImp : public MessagerImp{
public:
    virtual void PlaySound()
    {
        //**************
    }
    virtual void DrawShape()
    {
        //**************
    }
    virtual void WriteText()
    {
        //**************
    }
    virtual void Connect()
    {
        //**************
    }
};

class MobileMessageImp : public MessagerImp{
public:
    virtual void PlaySound()
    {
        //**************
    }
    virtual void DrawShape()
    {
        //**************
    }
    virtual void WriteText()
    {
        //**************
    }
    virtual void Connect()
    {
        //**************
    }
};


//业务抽象 m
//类的数目: 1 + n + m

class MessageLite:public Messager
{
    virtual void Login(string username, string password)
    {
        messagerImp->PlaySound();
        //*****
        messagerImp->Connect();
    }
    virtual void SendMessage(string message)
    {
        messagerImp->WriteText();
    }
    virtual void SendPicture(Image image)
    {
        messagerImp->DrawShape();
        //*****
    }

};

class MessagePerfect:public Messager
{
    virtual void Login(string username, string password)
    {
        messagerImp->PlaySound();
        //*****
        messagerImp->Connect();
    }
    virtual void SendMessage(string message)
    {
        messagerImp->WriteText();
    }
    virtual void SendPicture(Image image)
    {
        messagerImp->DrawShape();
        //*****
    }

};


void Process()
{
    //运行时装配
    MessagerImp *mImp = new PCMessageImp();
    Messager *m = new Messager(mImp);
}


