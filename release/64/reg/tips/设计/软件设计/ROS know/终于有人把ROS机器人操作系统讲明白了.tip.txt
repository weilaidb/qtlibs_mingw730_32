腾讯云
备案控制台
开发者社区
学习
实践
活动
专区
工具
TVP
文章/答案/技术大牛搜索
写文章
提问
登录/注册
 	
专栏首页华章科技终于有人把ROS机器人操作系统讲明白了
3
1


终于有人把ROS机器人操作系统讲明白了
发布于2022-03-11 19:17:09阅读 3.3K0
导读：机器人是多专业知识交叉的学科，通常涉及传感器、驱动程序、多机通信、机械结构、算法等，为了更高效地进行机器人的研究和开发，选择一个通用的开发框架非常必要，ROS（Robot Operating System，机器人操作系统）就是流行的框架之一。

本文将带领大家了解和使用ROS，掌握ROS的核心概念，为后续学习打好基础。

作者：张虎

来源：大数据DT


01 ROS简介

可能很多初学者听到机器人操作系统，就被“操作系统”几个字吓住了。其实简单点说，ROS就是一个分布式的通信框架，帮助程序进程之间更方便地通信。

一个机器人通常包含多个部件，每个部件都有配套的控制程序，以实现机器人的运动与视听功能等。那么要协调一个机器人中的这些部件，或者协调由多个机器人组成的机器人集群，怎么办呢？这时就需要让分散的部件能够互相通信，在多机器人集群中，这些分散的部件还分散在不同的机器人上。解决这种分布式通信问题正是ROS的设计初衷。

随着越来越多的人参与ROS开发及源码贡献，社区涌现出大量的第三方工具和实用开源软件包，使ROS变成现在的样子。

一个经常让初学者困惑的地方是，学会了ROS就是学会机器人开发了吗？当然不是，严格意义上讲ROS只是一套通信框架而已，机器人中的各种算法和应用程序依然是用C++、Python等常见编程语言进行开发的。

1. ROS的性能特色

在正式学习ROS之前，先介绍ROS的几个特性，即元操作系统、分布式通信机制、松耦合软件框架、丰富的开源功能库等，来帮大家建立一些感性的认识。

ROS是一个机器人领域的元操作系统。也就是说，它并不是真正意义上的操作系统，其底层的任务调度、编译、设备驱动等还是由它的原生操作系统Ubuntu Linux完成。

ROS实际上是运行在Ubuntu Linux上的亚操作系统，或者说软件框架，但提供硬件抽象、函数调用、进程管理这些类似操作系统的功能，也提供用于获取、编译、跨平台的函数和工具。

ROS的核心思想就是将机器人的软件功能做成一个个节点，节点之间通过互相发送消息进行沟通。这些节点可以部署在同一台主机上，也可以部署在不同主机上，甚至还可以部署在互联网上。ROS网络通信机制中的主节点（master）负责对网络中各个节点之间的通信过程进行管理调度，同时提供一个用于配置网络中全局参数的服务。

ROS是松耦合软件框架，利用分布式通信机制实现节点间的进程通信。ROS的软件代码以松耦合方式组织，开发过程灵活，管理维护方便。

ROS具有丰富的开源功能库。ROS是基于BSD（Berkeley Software Distribution，伯克利软件发行）协议的开源软件，允许任何人修改、重用、重发布以及在商业和闭源产品中使用，使用ROS能够快捷地搭建自己的机器人原型。

2. ROS的发行版本

与Linux发行版类似，ROS发行版内置了一系列常用功能包，即将ROS系统打包安装到原生系统中。ROS最初是基于Ubuntu系统开发的，ROS的发行版本名称也和Ubuntu采用了同样的规则，即版本名称由两个相同首字母的英文单词组成，版本首字母按字母表递增顺序选取，图1-1展示了ROS的一些主要版本。


▲图1-1 ROS的主要版本

3. ROS的学习方法

要想学好以及用好ROS，需要进行大量的实践操作。因此在快速了解ROS的核心概念和编程范式后，就要结合大量的实际项目来深入理解ROS。学会用正确的方式解决问题，能帮你更快地提高能力。ROS的学习资源主要有以下几个。

官网：www.ros.org
源码：github.com
Wiki：wiki.ros.org
问答：answers.ros.org
02 ROS系统架构

安装完ROS后，很多朋友应该迫不及待想立马开始写程序。由于ROS的架构比较复杂，为了后面容易理解遇到的各种概念，这里先讨论一下ROS的系统架构，好让大家对ROS中的各种概念有全面性把控。按照官方的说法，可以分别从计算图、文件系统和开源社区视角来理解ROS架构。

1. 从计算图视角理解ROS架构

ROS中可执行程序的基本单位叫节点（node），节点之间通过消息机制进行通信，这样就组成了一张网状图，也叫计算图，如图1-3所示。


▲图1-3 ROS的计算图结构

节点是可执行程序，通常也叫进程。ROS功能包中创建的每个可执行程序在被启动加载到系统进程中后，就是一个ROS节点，如图1-3中的节点1、节点2、节点3等。

节点之间通过收发消息进行通信，消息收发机制分为话题（topic）、服务（service）和动作（action）三种，如图1-3中的节点2与节点3、节点2与节点5采用话题通信，节点2与节点4采用服务通信，节点1与节点2采用动作通信。计算图中的节点、话题、服务、动作都要有唯一名称作为标识。

ROS利用节点将代码和功能解耦，提高了系统的容错性和可维护性。所以最好让每个节点都具有特定的单一功能，而不是创建一个包罗万象的庞大节点。如果用C++编写节点，需要用到ROS提供的roscpp库；如果用Python编写节点，需要用到ROS提供的rospy库。

消息是构成计算图的关键，包括消息机制和消息类型两部分。消息机制有话题、服务和动作三种，每种消息机制中传递的数据都具有特定的数据类型（即消息类型），消息类型可分为话题消息类型、服务消息类型和动作消息类型。消息机制和消息类型将在1.5节中展开讲解。

数据包（rosbag）是ROS中专门用来保存和回放话题中数据的文件，可以将一些难以收集的传感器数据用数据包录制下来，然后反复回放来进行算法性能调试。

参数服务器能够为整个ROS网络中的节点提供便于修改的参数。参数可以认为是节点中可供外部修改的全局变量，有静态参数和动态参数。静态参数一般用于在节点启动时设置节点工作模式；动态参数可以用于在节点运行时动态配置节点或改变节点工作状态，比如电机控制节点里的PID控制参数。

主节点负责各个节点之间通信过程的调度管理。因此主节点必须要最先启动，可以通过roscore命令启动。

2. 从文件系统视角理解ROS架构

ROS程序的不同组件要放在不同的文件夹中，这些文件夹根据不同的功能对文件进行组织，这就是ROS的文件系统结构，如图1-4所示。


▲图1-4 ROS的文件系统结构

工作空间是一个包含功能包、编译包和编译后可执行文件的文件夹，用户可以根据自己的需要创建多个工作空间，在每个工作空间中开发不同用途的功能包。在图1-4中，我们创建了一个名为catkin_ws的工作空间，其中包含src、build和devel三个文件夹。

src文件夹放置各个功能包和配置功能包的CMake配置文件CMakeLists.txt。这里说明一下，由于ROS中的源码采用catkin工具进行编译，而catkin工具又基于CMake技术，所以我们在src源文件空间和各个功能包中都会见到一个CMake配置文件CMakeLists.txt，这个文件起到配置编译的作用。
build文件夹放置编译CMake和catkin功能包时产生的缓存、配置、中间文件等。
devel文件夹放置编译好的可执行程序，这些可执行程序是不需要安装就能直接运行的。一旦功能包源码编译和测试通过后，可以将这些编译好的可执行文件直接导出与其他开发人员分享。
功能包是ROS中软件组织的基本形式，具有创建ROS程序的最小结构和最少内容，它包含ROS节点源码、脚本、配置文件等。

CMakeLists.txt是功能包配置文件，用于编译Cmake功能包编译时的编译配置。
package.xml是功能包清单文件，用xml的标签格式标记该功能包的各类相关信息，比如包的名称、开发者信息、依赖关系等，主要是为了使功能包的安装和分发更容易。
include/<pkg_name>是功能包头文件目录，可以把功能包程序中包含的*.h头文件放在这里。include目录之所以还要加一级路径<pkg_name>是为了更好地区分自己定义的头文件和系统标准头文件，<pkg_name>用实际功能包的名称替代。不过这个文件夹不是必要项，比如有些程序没有头文件。
msg、srv和action这三个文件夹分别用于存放非标准话题消息、服务消息和动作消息的定义文件。ROS支持用户自定义消息通信过程中使用的消息类型。这些自定义消息不是必要的，比如程序只使用标准消息类型。
scripts目录存放Bash、Python等脚本文件，为非必要项。
launch目录存放节点的启动文件，*.launch文件用于启动一个或多个节点，在含有多个节点的大型项目中很有用，为非必要项。
src目录存放功能包节点所对应的源代码，一个功能包中可以有多个节点程序来完成不同的功能，每个节点程序都可以单独运行。这里src目录存放的是这些节点程序的源代码，你可以按需创建文件夹和文件来组织源代码，源代码可以用C++、Python等编写。
3. 从开源社区视角理解ROS架构

ROS是开源软件，各个独立的网络社区分享和贡献软件及教程，形成了强大的ROS开源社区，如图1-5所示。


▲图1-5 ROS的开源社区结构

ROS的发展依赖于开源和共享的软件，这些代码由不同的机构共享和发布，比如GitHub源码共享、Ubuntu软件仓库发布、第三方库等。ROS的官方wiki是重要的文档讨论社区，在里面可以很方便地发布与修改相应的文档页面。ROS的answer主页里有大量ROS开发者的提问和回答，对ROS开发中遇到的各种问题的讨论很活跃。

关于作者：张虎，深圳市睿思智行科技有限公司CEO。曾就职于深圳市智能机器人研究院，主持机器人自主导航方面的研究项目。工作期间以网名“小虎哥哥爱学习”在知乎、CSDN、bilibili等平台创作了大量机器人SLAM导航相关的优质博客文章及视频教程，深受广大网友的喜爱。他对强人工智能的研究非常感兴趣，并致力于将具有先进智能的机器人进行产业化落地。

本文摘编自《机器人SLAM导航：核心技术与实战》，经出版方授权发布。（ISBN：9787111697428）

文章分享自微信公众号：

大数据
复制公众号名称
本文参与 腾讯云自媒体分享计划 ，欢迎热爱写作的你一起参与！

作者：张虎
原始发表时间：2022-01-16
如有侵权，请联系 cloudcommunity@tencent.com 删除。
机器人开源UbuntuLinuxPython
举报
点赞 3分享
登录 后参与评论
0 条评论
相关文章
终于有人把DevOps讲明白了
导读：DevOps中的Dev指的是Development（开发），Ops指的是Operations（运维），用一句话来说，DevOps就是打通开发运维的壁垒，实...

IT阅读排行榜
终于有人把Knative讲明白了
导读：Knative是Google在2018的Google Cloud Next大会上发布的一款基于Kubernetes的Serverless框架。

IT阅读排行榜
终于有人把AB实验讲明白了
导读：近几年AB实验的曝光度越来越高。AB实验并不是近几年才有的，从推荐系统诞生开始，AB实验就扮演着重要的角色。本文主要介绍AB实验的基本概念，包括AB实验和...

IT阅读排行榜
终于有人把数据挖掘讲明白了
导读：数据挖掘是一种发现知识的手段。数据挖掘要求数据分析师通过合理的方法，从数据中获取与挖掘项目相关的知识。

IT阅读排行榜
终于有人把云计算讲明白了
导读：对于云计算的阐述，我们将从云计算概念、原理、分类、特点和应用这5个方面展开。

IT阅读排行榜
终于有人把数据挖掘讲明白了
数据挖掘（Data Mining）应该是一门大家都听说过，但又不太容易说清楚的课程。在数据科学领域，乃至在更大的计算机科学领域，数据挖掘就好比山东蓝翔，大家不一...

木羊
终于有人把线性回归讲明白了
导读：本文将介绍什么是回归问题、解决回归问题的基本思路步骤和用机器学习模型解决回归问题的基本原理，以及如何用线性模型解决回归问题。

CDA数据分析师
终于有人把辛普森悖论讲明白了
在做重大决策时，我们总会参考一些统计数据，比如高考前关注学校的录取率，择业时参考各个行业的就业率等。统计数字可以帮助我们比较这些对象的优劣，做出更加合理的决定。...

IT阅读排行榜
终于有人把标签设计讲明白了
导读：标签是根据业务场景的需求，通过对目标对象（含静态、动态特性）运用抽象、归纳、推理等算法得到的高度精练的特征标识，用于差异化管理与决策。

IT阅读排行榜
终于有人把Scrapy爬虫框架讲明白了
导读：Scrapy由Python语言编写，是一个快速、高层次的屏幕抓取和Web抓取框架，用于抓取Web站点并从页面中提取出结构化的数据。Scrapy用途广泛，可...

IT阅读排行榜
终于有人把 CountDownLatch，CyclicBarrier，Semaphore 说明白了!
在 JUC 下包含了一些常用的同步工具类，今天就来详细介绍一下，CountDownLatch，CyclicBarrier，Semaphore 的使用方法以及它们...

用户1263954
终于有人把 CountDownLatch，CyclicBarrier，Semaphore 说明白了!
在 JUC 下包含了一些常用的同步工具类，今天就来详细介绍一下，CountDownLatch，CyclicBarrier，Semaphore 的使用方法以及它们...

敖丙
终于有人把数据中台讲明白了
导读：要建设数据中台，我们首先需要明确什么是数据中台，以及数据中台能为企业带来什么价值。

IT阅读排行榜
终于有人把监督学习讲明白了
导读：在机器学习的各种方法中，监督学习是迄今为止成果最令人印象深刻的一种。本文介绍监督学习解决像肺炎诊断这类问题的基本原理。

IT阅读排行榜
终于有人把A/B测试讲明白了
导读：对照实验有时也称为A/B测试、A/B/n 测试（强调多变体测试）、实地实验、随机对照实验、分拆测试、分桶测试和平行飞行测试。本文带你了解一些相关术语及应用...

IT阅读排行榜
终于有人把知识图谱讲明白了
1977年，美国计算机科学家费根鲍姆正式命名知识工程，他曾于1994年获得图灵奖，被誉为专家系统之父，知识工程奠基人。知识工程是自上而下的，并严重依赖专家干预。...

IT阅读排行榜
终于有人把搜索引擎讲明白了
全世界每年产生1EB到2EB (1EB≈1018B)信息，相当于地球上每个人每年大概产生250MB信息。其中，纸质信息仅占所有信息的0.03%。静态网页有上百亿...

IT阅读排行榜
终于有人把可解释机器学习讲明白了
导读：为了解决模型的“黑盒”问题，科学家们提出了可解释机器学习。除了预测的精准性之外，可解释性也是机器学习模型是否值得信赖的重要衡量标准。

IT阅读排行榜
更多文章
作者介绍
IT阅读排行榜
机械工业出版社新媒体运营
关注专栏
文章
2.2K
阅读量
1.4M
获赞
5.6K
作者排名
48
精选专题
腾讯云原生专题
云原生技术干货，业务实践落地。
活动推荐
社区创作者年终回顾
参与活动，赢取限量周边礼品
立即参加
邀请好友加入自媒体分享计划
邀请好友，同享奖励 30 / 100 / 180 元云服务器代金券
立即邀请
运营活动
活动名称广告关闭
关注
腾讯云开发者公众号
将获得
10元无门槛代金券
洞察腾讯核心技术
剖析业界实践案例
腾讯云开发者公众号二维码
社区
专栏文章
阅读清单
互动问答
技术沙龙
技术视频
团队主页
腾讯云TI平台
活动
自媒体分享计划
邀请作者入驻
自荐上首页
技术竞赛
资源
技术周刊
社区标签
开发者手册
开发者实验室
关于
视频介绍
社区规范
免责声明
联系我们
友情链接
腾讯云开发者

扫码关注腾讯云开发者

领取腾讯云代金券

热门产品
域名注册云服务器区块链服务消息队列网络加速云数据库域名解析云存储视频直播
热门推荐
人脸识别腾讯会议企业云CDN 加速视频通话图像分析MySQL 数据库SSL 证书语音识别
更多推荐
数据安全负载均衡短信文字识别云点播商标注册小程序开发网站监控数据迁移
Copyright © 2013 - 2023 Tencent Cloud. All Rights Reserved. 腾讯云 版权所有

深圳市腾讯计算机系统有限公司 ICP备案/许可证号：粤B2-20090059 深公网安备号 44030502008569

腾讯云计算（北京）有限责任公司 京ICP证150476号 | 京ICP备11018762号 |京公网安备号11010802020287

扫描二维码