BCM53115交换芯片光口link状态的问题

许文强@北京

于 2014-12-16 19:31:24 发布

2147
 收藏 5
分类专栏： 芯片 文章标签： 交换芯片
版权

芯片
专栏收录该内容
1 篇文章0 订阅
订阅专栏
版权声明：本文为博主原创文章，未经博主允许不得转载。

曾经有一段时间，光口的link状态很是让我困惑，同样的板卡昨天他还是link的，今天就down。到底啥时候该link，啥时候该link down呢？

我先描述一下现象，第一种状态，收或者发光纤随便断掉一根，就link down；第二种状态，只有收光纤断掉，才会link down。这两种状态的唯一区别是配置了光口自协商，那就让我们来看看光口自协商的机制吧。

1.两端都设置为自协商模式
双方互相发送／C／码流，如果连续接收到3个相同的／C／码且接收到的码流和本端工作方式相匹配，则返回给对方一个带有Ack应答的／C／码，对端接收到Ack信息后，认为两者可以互通，设置端口为UP状态
2.两端均设置为强制模式
双方互相发送／I／码流，一端接收到／I／码流后，认为对端是与自己相匹配的端口，直接设置本端端口为UP状态
由于自协商状态需要对端的ack应答，所以单独拔掉一根光纤，一端无法收到码流，一端无法收到ack码流，就会link down；但是强制模式下，只要接收到匹配的码流后就会link up。这就是为什么，光口的link状态，有时候表现为R_link，有时候却表现为何接收和发送光纤都有关系。
————————————————
版权声明：本文为CSDN博主「许文强@北京」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/xq723310/article/details/41964527