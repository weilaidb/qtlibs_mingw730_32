防火墙的工作原理
防火墙的基本结构可以归入包过滤和应用代理两类。其中
包过滤防火墙技术专注的是网络层和传输层
应用代理防火墙则利用代理服务器，它关心的是应用层的保护。


1.包过滤防火墙
也称作网络防火墙，工作于OSI（Open system Interconnect，开放系统互连）模型的网络层（即第4层），通过检查每个数据包的IP地址，采用通信协议和端口号等来判断是否允许放行。


网络防火墙的优点是速率快、费用低、对用户透明。但是其缺点也很突出，即对网络的保持有限，因为它只检查地址和端口。



2.应用代理防火墙
又称为应用级网关，工作于OSI参考模型的应用层（第7层）。该类防火墙类似于代理服务器，可以达到隐藏内部网络结构的作用。其工作过程如下：当客户机需要使用服务器上的数据时，首先将数据请求发给代理服务器，由代理服务器根据这一请求向服务器请求数据。然后再由代理服务器将返回的数据转给客户机。

应用级防火墙的每一种协议都需要相应的代理软件支持，因此工作量大，且效率较低。结合代理类型防火墙的安全性和包过滤防火墙高速度优点的自适应代理技术应运而生，由自适应代理服务器(Adaptive Proxy Server)与动态包过滤器(Dynamic Packet filter)组成，可以在不影响安全性的基础上，将代理型防火墙的性能提高10倍以上。只需要设置服务类型、安全级别等信息，自适应代理就可以根据用户的配置信息，决定是由代理服务从应用层代理请求还是从网络层转发数据包。