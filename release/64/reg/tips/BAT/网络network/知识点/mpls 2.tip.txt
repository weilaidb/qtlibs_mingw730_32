多协议标签交换（MultiprotocolLableSwitching,MPLS）是一种用于快速数据包交换和路由的体系，它为网络数据流量提供了目标、路由、转发和交换等功能。MPLS提供了一种方式，将IP地址网段映射为简单的具有固定长度的标签。在现网应用中，常用于构建VPN通道。

赵新胜;陈美娟.路由与交换技术(Kindle位置3393-3395).人民邮电出版社.Kindle版本.



相比较于IP转发技术，MPLS采用了标签交换的方式实现数据的转发。不同于传统IP的面向无连接转发，MPLS的标签交换机制建立了一种面向连接的数据转发路径，通过控制标签路径的建立，就可以控制数据的转发路径。另外，在MPLS域内，路由器不再需要查看每个报文的目的IP地址，只需要根据封装在IP头外面的标签进行转发即可。如图4-3所示，RTA收到IP报文后，封装上MPLS标签1024，然后将携带了标签的数据从S0口发出。RTB从端口S0收到RTA发送的带有标签的报文，查找标签映射表，将入标签1024替换为出标签1029，然后将数据从S3端口送出，RTC在收到报文后，同样进行标签交换交换操作。数据在MPLS域内转发的时候，并不需要检查IP头部的目的IP地址，只需要根据外面的MPLS标签进行转发即可，从而免去了查找路由表的步骤。MPLS与传统IP路由方式相比，它在数据转发时，只在网络边缘分析IP报文头，而不用在每一跳都分析IP报文头，从而节约了处理时间。图4-3MPLS标签转发MPLS技术，意为多协议标签交换技术，全称是Multi-ProtocolLabelSwitching，可以从以下3个方面来理解MPLS。

●Multi-Protocol指的是多种三层协议支持，如IP、IPv6、IPX等。最常见的应用就是IP，在图4-3中，MPLS中封装的上层协议就是IP。MPLS的标签封装通常处于二层和三层之间，所以有时候也会把MPLS称为2.5层协议。

●Label指的是标签，MPLS是一种标签交换技术，这里的标签只具有局部意义，是用于区分不同业务或者不同用户的一种信息，譬如去往目的地A和去往目的地B的数据可以用不同的标签进行表示，而路由器RTA上和路由器RTB上标记去往目的地A的标签可能并不会相同。

●Switching指的是标签的交换，MPLS报文交换和转发是基于标签的。针对IP业务，IP包在进入MPLS网络时，入口的路由器分析IP包的内容，并且为这些IP包选择合适的标签，然后所有MPLS网络中的节点都是依据这个简短标签来作为转发依据，每经过一个中间节点都需要进行标签的交换。当该IP包最终离开MPLS网络时，标签被出口的边缘路由器分离。MPLS技术最开始出现的时候，由于不需要查找路由表，使数据包传送的延迟时间减短，增加网络传输的速度。然而，随着专用集成电路（ApplicationSpecificIntegratedCircuit,ASIC）技术的发展，路由查找速度已经不是阻碍网络发展的瓶颈。这使得MPLS在提高转发速度方面不再具备明显的忧势。但由于MPLS结合了IP网络强大的三层路由功能和传统二层网络高效的转发机制，在转发平面采用面向连接方式，这使得MPLS能够为流量工程（TrafficEngineering,TE）、虚拟专用网（VirtualPrivateNetwork,VPN）、服务质量（QualityofService,QoS）管理等应用提供更好的解决方案。图4-4所示是通过MPLS技术实现VPN的场景示例。惜助MPLS转发不需要查找路由表的功能，可以将不同的分支点连接在一起，构建用户的私有网络。在图4-4中，CE是用户边缘路由器（CustomerEdge,CE）。PE是服务商边缘路由器（ProviderEdge,PE），位于骨干网络。P是服务提供商网络中的骨干路由器（Provider,P），不与CE直接相连。CE路由器维护用户的局域网路由信息，PE和P则维护运营商的公网路由信息，在用户需要在自己的两个私网分支结构之间进行数据通信的时候，可以在运营商的公网中创建一条MPLS的数据转发路径，将用户的私网数据封装在MPLS标签中透传到另一端的分支网络中。而数据在公网中进行传递的时候，只需要依据标签进行转发即可，不需要公网中的路由器维护用户的局域网路由信息。