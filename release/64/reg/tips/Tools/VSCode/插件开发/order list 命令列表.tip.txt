* 查看npm配置列表
npm config ls  

* 设置镜像为淘宝
npm config set registry https://registry.npm.taobao.org/

淘宝源换新域名了

npm config set registry https://registry.npmmirror.com/
npm config set ELECTRON_MIRROR https://npmmirror.com/mirrors/electron/


* 初始化开发库
// 安装需要的包
npm install -g yo generator-code
npm install -g typescript

npm install -g fs fs-extra vscode
npm install -g vs 

下载 n 这个用于更新 node 版本的工具
sudo npm install n -g
通过 n 这个工具下载 nodejs 的最新稳定版本
sudo n stable

// 运行
yo code

*编译
F5 
Then, inside the editor, press F5. This will compile and run the extension in a new Extension Development Host window.

F5 运行
Ctrl+Shift+F5 重新加载
--弹出异常，需要将extension.js打开，并位于这个文件中。

编译并
npm run compile

* 文件功能说明：
package.json
该文件是vscode扩展的清单文件，里面有很多字段，官方对每个字段都进行了详细阐述


*打包发布
安装 vsce(Visual Studio Code Extension)
npm i vsce -g

打包成 vsix 文件：
vsce package

tips：生成的 vsix 文件不能直接拖入安装，只能从扩展的右上角选择 Install from VSIX 安装。

发布到应用市场
注册登陆网站：登陆网站 https://dev.azure.com/vscode 获取一个 access token，用这个 token 来创建一个 publisher。

创建发布者账号： vsce create-publisher (publisher name)

登陆账号： vsce login (publisher name)

发布
vsce publish

增量发布：版本号(major.minor.patch)

vsce publish patch(minor/major)

取消发布：

vsce unpublish (publisher name).(extension name)

更新
修改版本号，重新执行 vsce publish 即可



*安装typescript
npm install -g typescript

检查是否安装成功，即看看是否有版本号 下面这个V是大写

tsc -V 

运行(编译)typescript。
其实是编译ts文件，浏览器不能直接运行ts文件，需要编译成js文件使用。在nodejs中也可以使用typescript进行编译

tsc demo.ts

*typescript 网址
https://www.tslang.cn/docs/home.html




















常见问题:
1.打包或发布报错
 ERROR  Make sure to edit the README.md file before you package or publish your extension.
vsce package Make sure to edit the README.md file before you package or publish your extension.
删除ReadMe.md

2.fs.stat代码中卡着不动，没有响应，像是死循环
没有引用头文件 
const fs = require('fs');


3.Uncaught Error Error: Cannot find module 'vscode'
卸载vscode,使用zip版本
重新yo code 试一下
重新更新yo code,生成依赖


4.修改out\extension.js 内容被覆盖
应该修改 src\extension.ts 文件， out下的是自动生成的。

5.out\extension.js 中文乱码
src\extension.ts 必须是UTF-8格式的


6.
 Node 升级工具n 安装太慢 和 报错

修改
/usr/local/bin/n
中的NODE_MIRROR为淘宝地址 https://npm.taobao.org/mirrors/node

N_NODE_MIRROR=${N_NODE_MIRROR:-${NODE_MIRROR:-https://nodejs.org/dist}} 改成

N_NODE_MIRROR=${N_NODE_MIRROR:-${NODE_MIRROR:-https://npm.taobao.org/mirrors/node}}


7.npm 删除全部依赖包后，npm执行报错
#ok
rm -rf  /usr/local/lib/node_modules


#ng
拾一九
于 2021-10-26 14:54:54 发布 25498
收藏 28
分类专栏： 报错总结 文章标签： npm node.js vue.js
版权
报错总结 专栏收录该内容
2 篇文章 0 订阅
订阅专栏
第一种办法

    删除全部依赖包 npm uninstall *
    ( 删除指定的依赖包 npm uninstall xxx
    删除全局的指定依赖 npm uninstall xxx -g
    xxx为依赖名称)
    清缓存 npm cache clean --force
    手动删除node_modules文件夹及文件夹里面的全部文件

第二种办法

    安装npm包–rimraf npm install rimraf -g
    执行命令 1rimraf node_modules


————————————————
版权声明：本文为CSDN博主「拾一九」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/DarlingYL/article/details/120972047


sudo apt remove libnode72


Option 2 — Installing Node.js with Apt Using a NodeSource PPA
To install a different version of Node.js, you can use a PPA (personal package archive) maintained by NodeSource. These PPAs have more versions of Node.js available than the official Ubuntu repositories. Node.js v14, v16, and v18 are available as of the time of writing.

First, we will install the PPA in order to get access to its packages. From your home directory, use curl to retrieve the installation script for your preferred version, making sure to replace 18.x with your preferred version string (if different).

cd ~
curl -sL https://deb.nodesource.com/setup_18.x -o nodesource_setup.sh
Refer to the NodeSource documentation for more information on the available versions.

You can inspect the contents of the downloaded script with nano (or your preferred text editor):

nano nodesource_setup.sh
Running third party shell scripts is not always considered a best practice, but in this case, NodeSource implements their own logic in order to ensure the correct commands are being passed to your package manager based on distro and version requirements. If you are satisfied that the script is safe to run, exit your editor, then run the script with sudo:

sudo bash nodesource_setup.sh
The PPA will be added to your configuration and your local package cache will be updated automatically. You can now install the Node.js package in the same way you did in the previous section. It may be a good idea to fully remove your older Node.js packages before installing the new version, by using sudo apt remove nodejs npm. This will not affect your configurations at all, only the installed versions. Third party PPAs don’t always package their software in a way that works as a direct upgrade over stock packages, and if you have trouble, you can always try to revert to a clean slate.

sudo apt install nodejs
Verify that you’ve installed the new version by running node with the -v version flag:

node -v
Output
v18.7.0
The NodeSource nodejs package contains both the node binary and npm, so you don’t need to install npm separately.

At this point you have successfully installed Node.js and npm using apt and the NodeSource PPA. The next section will show how to use the Node Version Manager to install and manage multiple versions of Node.js.



8.window package run on linux no good, tips:
Activating extension 'undefined_publisher.toeasy' failed: Cannot find module '/home/weilaidb/work/git/vscodeplugineg/linuxeasy/out/extension.js' Require stack: - /usr/share/code/resources/app/out/vs/loader.js - /usr/share/code/resources/app/out/bootstrap-amd.js - /usr/share/code/resources/app/out/bootstrap-fork.js - .




9.version requestion
[weilaidb@weilaidb-virtual-machine] ~/work/git/vscodeplugineg/linuxeasy
$ vsce package
 ERROR  @types/vscode ^1.80.0 greater than engines.vscode ^1.79.0. Consider upgrade engines.vscode or use an older @types/vscode version


  "engines": {
    "vscode": "^1.80.0"
  },




