
切换模式
写文章
登录/注册
RPC是什么，看完你就知道了
Java发财
Java发财
119 人赞同了该文章
RPC概述
RPC是什么
RPC（Remote Procedure Call）远程过程调用协议，一种通过网络从远程计算机上请求服务，而不需要了解底层网络技术的协议。RPC它假定某些协议的存在，例如TPC/UDP等，为通信程序之间携带信息数据。在OSI网络七层模型中，RPC跨越了传输层和应用层，RPC使得开发，包括网络分布式多程序在内的应用程序更加容易。

过程是什么？ 过程就是业务处理、计算任务，更直白的说，就是程序，就是想调用本地方法一样调用远程的过程

和本地调用有什么区别



远程调用，就好像异地恋一样，隔着千山万水






本地调用，就是女生就在你身边，近水楼台先得月 远程调用之间需要通过网络，所以响应要慢几个数量级，也不那么可靠

RPC模式
RPC采用客户端/服务端的模式，通过request-response消息模式实现




RPC的三个过程
==1：通讯协议== 比如：你需要找人在国外干活，那么你可以直接飞过去或者打电话或者通过互联网的形式，去找人，这个找人的过程就是通讯协议 ==2：寻址== 既然要找人干活，肯定要知道地址在哪，飞过去需要找到详细地址，打电话需要知道电话号码，互联网需要知道IP是多少 ==3：数据序列化== 就是说，语言需要互通，才能够让别人干活，之间需要一个大家都懂的语言去交流

为什么要使用RPC
1：服务化/微服务 2：分布式系统架构 3：服务可重用 4：系统间交互调用

RPC和其他协议的区别
RMI远程方法调用是RPC的一种具体实现，webservice、restfull都是RPC，只是消息的组织形式、消息协议不同

RPC使用场景
和MQ做对比： MQ有一个中间节点queue，可以存储消息 RPC的特性： 同步调用，对于需要等待返回结果的场景，可以使用RPC 消息MQ的特性： 异步单向的消息，不需要等待消息处理完成 如果需要同步得到结果的场景，RPC比较适合，如果希望使用简单，RPC也适合，RPC操作基于接口，操作简单，使用的方式模拟本地方法的调用，异步的方式编程比较复杂






RPC的流程



1：客户端处理过程中调用client sub，就像调用本地方法一样，传入参数 2：client sub将参数编组为消息，然后通过系统调用向服务端发送消息 3：客户端本地的操作系统将消息从客户端发送到服务端 4：服务端将接收到的数据包传递给server sub 5：server sub将接收到的数据解组为参数 6：server sub再调用服务端的过程，过程执行的结果以反方向的相同步骤响应给客户端

sub(存根) ：分布式计算中的存根是一段代码，它转换在远程过程调用（RPC）期间client和server之间传递的参数

需要处理的问题： 1：client sub、server sub的开发 2：参数的编组和解组 3：消息如何发送 4：过程结果如何表示、异常情况如何处理 5：如何实现安全的访问控制

RPC核心概念术语
1：client， 客户端 2：server，服务端 3：calls，请求 4：replier，响应 5：services，一个网络服务由一个或者多个远程程序集构成 6：programs，一个远程程序实现一个或多个远程过程 7：procedures，过程、过程的参数、结果在程序协议说明书中定义说明 8：version，为兼容程序协议变更，一个服务端可能支持多个版本的远程程序

RPC协议
RPC调用过程中需要将消息进行编组然后发送，接收方需要解组消息为参数，过程处理结果也需要经过编组、解组；消息由哪些部分构成以及消息的表示形式就构成了消息协议。 RPC协议规定请求消息、响应消息的格式，在TCP之上我们可以选用或者自定义消息协议来实现RPC的交互

RPC框架
封装好了参数编组、消息解组、底层网络通信的RPC程序开发框架，可以直接在此基础上编写，只关注过程代码 java领域中常用的RPC框架有： 传统的webservice框架：apache CXF、apache Axis2 新兴的微服务框架：Dubbo、springcloud、apache Thrift、ICE、GRPC等

服务暴露
远程提供者需要以某种形式提供服务调用相关的信息，包括但不限于服务接口定义、数据结构或者中间态的服务定义文件，web service的WSDL文件；服务调用者需要通过一定的途径获取远程服务调用相关的信息




远程代理对象
服务调用者使用的服务实际上是远程服务的本地代理，说白了就是通过动态代理实现 java中至少提供了两种动态代码的生成，一种是jdk动态代理，一种是字节码生成： 动态代理比字节码生成使用起来更加方便，但是性能上没有字节码生成好，字节码生成在代码可读性上要差一些

通信
RPC框架的通信与具体的协议无关，RPC可基于HTTP或者TCP协议




序列化
传输方式和序列化会直接影响RPC的性能




发布于 2020-08-17 21:38
RPC 框架
Java 程序员
序列化
​赞同 119​
​9 条评论
​分享
​喜欢
​收藏
​申请转载
​
写下你的评论...

9 条评论
默认
最新
莫林11
莫林11
RPC协议的主要目的是做到不同服务间调用方法像同一服务间调用本地方法一样
2021-09-07
​67
Tonny
Tonny
一语中的

01-12
​赞
ding
ding
牛

2022-11-09
​赞
展开其他 2 条回复​
地球不好玩儿
地球不好玩儿
看着比较吃力，断句噎得慌~~~

2022-07-14
​5
Thend
Thend
stub，不是sub

2022-07-22
​4
桜莘
桜莘
开头就写错啦，TCP

2022-12-01
​1
调伏
调伏
不觉得这是一种协议，个人认为只是代码的封装而已

03-25
​赞
推荐阅读
人人都能看懂的RPC简介，这不有手就行？
这篇文章主要介绍下RPC的概念，相信你看完本文后会轻描淡写的说出： RPC就这？就这？ 一、为什么会出现RPC的概念? RPC(Remote Progress Call)，直译为中文就是远程过程调用。首先从一个简单…

Ikerl...
发表于linux...
RPC原理解析
1.RPC原理解析 1.1 什么是RPC RPC(Remote Procedure Call Protocol)——远程过程调用协议，它是一种通过网络从远程计算机程序上请求服务，而不需要了解底层网络技术的协议。RPC协议假定某些…

java后端开发
RPC原理解析
RPC原理解析
Johnson
RPC简介（超清晰通俗！）
RPC简介（超清晰通俗！）
tqz
发表于Dubbo...


选择语言
登录即可查看 超5亿 专业优质内容
超 5 千万创作者的优质提问、专业回答、深度文章和精彩视频尽在知乎。
立即登录/注册