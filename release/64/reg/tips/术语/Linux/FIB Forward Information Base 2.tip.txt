APP内阅读
华为技术：详解路由器静态路由的配置

2020-11-12 14:08
主要目的：使用静态路由使 IP 数据可达。
一、华为模拟器实操录像：
15:47
二、主要知识：
IP 路由概述简介
路由是数据通信网络中最基本的要素。路由信息就是指导报文发送的路径信息，路由的过程就是报文转发的过程。根据路由目的地的不同，路由可划分为：
● 网段路由：目的地为网段，IPv4地址子网掩码长度小于32位或IPv6地址前缀长度
小于128位。
●主机路由：目的地为主机，IPv4地址子网掩码长度为32位或IPv6地址前缀长度为
128位。
根据目的地与该路由器是否直接相连，路由又可划分为：
● 直连路由：目的地所在网络与路由器直接相连。
● 间接路由：目的地所在网络与路由器非直接相连。
根据目的地址类型的不同，路由还可以分为：
● 单播路由：表示将报文转发的目的地址是一个单播地址。
● 组播路由：表示将报文转发的目的地址是一个组播地址。
路由器及路由基本原理
在因特网中，网络连接设备用来控制网络流量和保证网络数据传输质量。常见的网络连接设备有集线器（Hub）、网桥（Bridge）、交换机（Switch）和路由器（Router）。这些设备的基本原理类似，下面就以路由器为例来介绍一下设备的基本原理。
路由器是一种典型的网络连接设备，用来进行路由选择和报文转发。路由器根据收到报文的目的地址选择一条合适的路径（包含一个或多个路由器的网络），然后将报文传送到下一个路由器，路径终端的路由器负责将报文送交目的主机。路由就是报文从源端到目的端的路径。当报文从路由器到目的网段有多条路由可达时，路由器可以根据路由表中优选路由进行转发。优选路由的选取与发现此路由的路由协议的优先级、路由的度量有关。当多条路由的协议优先级与路由度量都相同时，可以实现负载分担，缓解网络压力；当多条路由的协议优先级与路由度量不同时，可以构成路由备份，提高网络的可靠性。
静态路由与动态路由
路由器不仅支持静态路由，同时也支持RIP（Routing Information Protocol）、OSPF（Open Shortest Path First）、IS-IS（Intermedia System-Intermedia System）和BGP（Border Gateway Protocol）等动态路由协议。
静态路由与动态路由的区别
路由协议是路由器之间维护路由表的规则，用于发现路由，生成路由表，并指导报文转发。依据来源的不同，路由可以分为三类：
● 通过链路层协议发现的路由称为直连路由。
●通过网络管理员手动配置的路由称为静态路由。
● 通过动态路由协议发现的路由称为动态路由。
静态路由配置方便，对系统要求低，适用于拓扑结构简单并且稳定的小型网络。缺点是不能自动适应网络拓扑的变化，需要人工干预。
动态路由协议有自己的路由算法，能够自动适应网络拓扑的变化，适用于具有一定数量三层设备的网络。缺点是配置对用户要求比较高，对系统的要求高于静态路由，并将占用一定的网络资源和系统资源。
路由表和 FIB 表
路由器转发数据包的关键是路由表和FIB表，每个路由器都至少保存着一张路由表和一张FIB（Forwarding Information Base）表。路由器通过路由表选择路由，通过FIB表指导报文进行转发。
路由表
每台路由器中都保存着一张本地核心路由表（即设备的IP路由表），同时各个路由协议也维护着自己的路由表。
● 本地核心路由表
路由器使用本地核心路由表用来保存决策优选路由，并负责把优选路由下发到FIB表，通过FIB表指导报文进行转发。这张路由表依据各种路由协议的优先级和度量值来选取路由。
● 协议路由表
协议路由表中存放着该协议发现的路由信息。路由协议可以引入并发布其他协议生成的路由。例如，在路由器上运行OSPF协议，需要使用OSPF协议通告直连路由、静态路由或者IS-IS路由时，要将这些路由引入到OSPF协议的路由表中。
路由表中包含了下列关键项：
● Destination：表示此路由的目的地址。用来标识IP包的目的地址或目的网络。
● Mask：表示此目的地址的子网掩码长度。与目的地址一起来标识目的主机或路由器所在的网段的地址。将目的地址和子网掩码“逻辑与”后可得到目的主机或路由器所在网段的地址。例如：目的地址为10.1.1.1，掩码为255.255.255.0的主机或路由器所在网段的地址为10.1.1.0。掩码由若干个连续“1”构成，既可以用点分十进制表示，也可以用掩码中连续“1”的个数来表示。例如掩码255.255.255.0长度为24，即可以表示为24。
● Proto：表示学习此路由的路由协议。
● Pre：表示此路由的路由协议优先级。针对同一目的地，可能存在不同下一跳、出接口等多条路由，这些不同的路由可能是由不同的路由协议发现的，也可以是手工配置的静态路由。优先级高（数值小）者将成为当前的最优路由。
● Cost：路由开销。当到达同一目的地的多条路由具有相同的路由优先级时，路由开销最小的将成为当前的最优路由。
说明
Preference用于不同路由协议间路由优先级的比较，Cost用于同一种路由协议内部不同路由的优先级的比较。
● NextHop：表示此路由的下一跳地址。指明数据转发的下一个设备。
● Interface：表示此路由的出接口。指明数据将从本地路由器哪个接口转发出去。
三、主要实验内容：

1：更名及配置 IP 地址
[Huawei]sysname AR1
[AR1]int ether
[AR1]int Ethernet 0/0/0
[AR1-Ethernet0/0/0]undo portswitch //关闭接口二层，开启三层网络功能。
[AR1-Ethernet0/0/0]ip address 192.168.10.1 24
[Huawei]sysname AR2
[AR2]int gig
[AR2]int GigabitEthernet 0/0/0
[AR2-GigabitEthernet0/0/0]ip address 192.168.10.2 24
[AR2-GigabitEthernet0/0/0]quit
[AR2]int GigabitEthernet 0/0/1
[AR2-GigabitEthernet0/0/1]ip address 10.0.0.1 24
[Huawei]sysname AR3
[AR3]int Ethernet 0/0/0
[AR3-Ethernet0/0/0]undo portswitch
[AR3-Ethernet0/0/0]ip address 10.0.0.2 24
2：在中间路由器 AR2 上测试直连是否通
<AR2>ping 192.168.10.1
PING 192.168.10.1: 56 data bytes, press CTRL_C to break
Reply from 192.168.10.1: bytes=56 Sequence=1 ttl=255 time=80 ms
Reply from 192.168.10.1: bytes=56 Sequence=2 ttl=255 time=20 ms
Reply from 192.168.10.1: bytes=56 Sequence=3 ttl=255 time=20 ms
Reply from 192.168.10.1: bytes=56 Sequence=4 ttl=255 time=30 ms
Reply from 192.168.10.1: bytes=56 Sequence=5 ttl=255 time=20 ms
--- 192.168.10.1 ping statistics ---
5 packet(s) transmitted
5 packet(s) received
0.00% packet loss
round-trip min/avg/max = 20/34/80 ms
<AR2>ping 10.0.0.2
PING 10.0.0.2: 56 data bytes, press CTRL_C to break
Reply from 10.0.0.2: bytes=56 Sequence=1 ttl=255 time=30 ms
Reply from 10.0.0.2: bytes=56 Sequence=2 ttl=255 time=20 ms
Reply from 10.0.0.2: bytes=56 Sequence=3 ttl=255 time=30 ms
Reply from 10.0.0.2: bytes=56 Sequence=4 ttl=255 time=20 ms
Reply from 10.0.0.2: bytes=56 Sequence=5 ttl=255 time=20 ms
--- 10.0.0.2 ping statistics ---
5 packet(s) transmitted
5 packet(s) received
0.00% packet loss
round-trip min/avg/max = 20/24/30 ms
3：在 AR1 上直接 ping AR3 将不通，需要配置一条去方向以及回来方向的静态路由<AR1>ping 10.0.0.2
PING 10.0.0.2: 56 data bytes, press CTRL_C to break
Request time out
Request time out
在 R1 与 R3 上分别配置静态路由：
[AR1]ip route-static 10.0.0.0 255.255.255.0 192.168.10.2
[AR3]ip route-static 192.168.10.0 24 10.0.0.1
4：再测试连通性：
[AR1]ping 10.0.0.2
PING 10.0.0.2: 56 data bytes, press CTRL_C to break
Reply from 10.0.0.2: bytes=56 Sequence=1 ttl=254 time=60 ms
Reply from 10.0.0.2: bytes=56 Sequence=2 ttl=254 time=20 ms
Reply from 10.0.0.2: bytes=56 Sequence=3 ttl=254 time=20 ms
5：查看路由表：
<AR2>display ip routing-table
Route Flags: R - relay, D - download to fib
------------------------------------------------------------------------------
Routing Tables: Public
Destinations : 10 Routes : 10
Destination/Mask Proto Pre Cost Flags NextHop Interface
10.0.0.0/24 Direct 0 0 D 10.0.0.1 GigabitEthernet
0/0/1
10.0.0.1/32 Direct 0 0 D 127.0.0.1 GigabitEthernet
0/0/1
10.0.0.255/32 Direct 0 0 D 127.0.0.1 GigabitEthernet
0/0/1
127.0.0.0/8 Direct 0 0 D 127.0.0.1 InLoopBack0
127.0.0.1/32 Direct 0 0 D 127.0.0.1 InLoopBack0
127.255.255.255/32 Direct 0 0 D 127.0.0.1 InLoopBack0
192.168.10.0/24 Direct 0 0 D 192.168.10.2 GigabitEthernet
0/0/0
192.168.10.2/32 Direct 0 0 D 127.0.0.1 GigabitEthernet
0/0/0
192.168.10.255/32 Direct 0 0 D 127.0.0.1 GigabitEthernet
0/0/0
255.255.255.255/32 Direct 0 0 D 127.0.0.1 InLoopBack0
本实验是通过华为模拟器eNSP1.3.00.100版（最新版）完成。该软件还包含CE、CX、NE40E、NE5000E、NE9000E、USG6000V的设备IOS，可完成复杂网络测试，需要该模拟器的朋友，可以转发此文关注小编，私信小编【666】即可获得。
精彩推荐
打开APP看更多精彩推荐

新民晚报
2022-05-06 13:34:31新民晚报官方帐号
关注
马里乌波尔钢铁厂究竟深藏什么秘密？请注意普京的道歉！海叔感觉，俄军最重要的目的是不放过一条“大鱼”。当地时间5月5日，联合国安理会举行乌克兰局势公开会。联合国秘书长古特雷斯表示，联合国和国际红十字会已经启动了从马里乌波尔和亚速钢铁厂疏散平民的第三轮行动，截至目前共有约500名平民得以疏散。第三，北约和俄罗斯都还想寻求谈判空间。俄罗斯官方不宣布抓住在乌克兰的北约“大鱼”，北约方面也不宣布自己的高阶层军官在乌克兰落入俄军手中。难道不是各自在试探开出价码吗？马里乌波尔钢铁厂内的乌克兰武装分子，该懂这个道理。可目前，显然，他们根本无暇顾及这些。他们在直接受训于北约军官的情况下，对乌克兰总统究竟是谁都未必关心。他们只关心参与一天的战事，自己能获得多少好处罢了。那等待他们的会是什么样的命运呢？

新浪财经
2022-05-06 17:40:18新浪财经官方账号,优质财经领域创作者
关注
央行最新发布：降了17个基点！瑞士在雀巢原料中查获半吨可卡因！秦刚：美应尽早取消加征的关税！人民银行5月6日发布的2022年一季度金融机构贷款投向统计报告显示，人民银行统计，2022年一季度末，金融机构人民币各项贷款余额201.01万亿元，同比增长11.4%；一季度人民币贷款增加8.34万亿元，同比多增6636亿元。报告还显示，3月份，新发放企业贷款利率为4.37%，比年初和上年同期分别低8和19个基点；3月份，新发放个人住房贷款利率为5.42%，比年初低17个基点。据国家邮政局5月6日消息，一季度，邮政行业业务总量和业务收入分别完成3354.3亿元和3268.8亿元，同比分别增长10.7%和10.0%。快递平均单价为9.9元/件，同比下降3.2%。美国《福布斯》杂志网站5日刊登对中国驻美国大使秦刚的专访报道。秦刚在采访中主要就中美经贸关系及双边经贸协议、企业投资、营商环境等回答了提问。英国央行5日宣布加息25个基点，将基准利率从0.75%上调至1.0%，达到2009年以来最高水平。这是英国央行自去年12月以来第四次加息。

123观察室
2022-05-06 16:40:49
关注
收网之战打响，俄军攻入亚速钢铁厂，或将成为乌东会战决定性一役俄罗斯发起此次特别军事行动已经历时两个多月，战事主要集中在乌克兰东部一带，特别是在马里乌波尔的作战，一直就是此次俄乌开战的最大焦点，其重要性甚至超过此前的基辅被围以及当前的顿巴斯会战。马里乌波尔的争夺战，又以亚速钢铁厂的攻守为核心，算是俄军在啃的一块最硬的骨头。如今，好消息终于来了，这块“硬骨头”即将被啃下来。当前亚速钢铁厂内的乌军虽然都是精锐，但人数正在越来越少，生活与作战物资都得不到补充，已呈强弩之末之势，俄军大概率完全拿下钢铁厂，并把地下工事里面的乌军力量全部逼出来，或者打死。如果亚速钢铁厂被俄军占领，马里乌波尔市便如同一只熟透了的苹果调入俄军的口袋。从此，俄军再无后顾之忧，也不必分散兵力，可以集中火力进行顿巴斯会战。或许，亚速钢铁厂之战将成为乌东会战胜负的决定性一役，甚至有可能事关俄乌两国未来的国运。可喜的是，目前情况来看，俄军距离战争的胜利又更近了一步。
正在加载...


乔杉独家语音

为你读新鲜资讯