#!/usr/bin/env python3
# -*- coding: utf-8 -*-
#filename:xmlcheckok.py
#function:XML检测正确性

##########

import sys
sys.path.append('.')
#自定义公共函数
from public import *




#####定义结束标志，标志未修改时为正常退出，默认为异常值，正常值为0
quitflag=1

def setquitflag(flag):
    global quitflag
    quitflag = flag

def over():
    global add
    printlntips("quitflag",quitflag, False)
    if 0 != quitflag:
        print('异常退出，！！！！！！！！')
    else:
        print('正常结束，★★★★★★★★★★★★★★★★')


atexit.register(over)

########main proc
if __name__ == '__main__':
    print("===========main proc===========\n" * 3)
    # if len(sys.argv) < 2:
        # print("usage: ./eg.sh XmlFileName.xml\n")
        # exit(0)

    print(sys.argv)
    args = sys.argv
    try:
        filename = args[1]
    except Exception:
        print('\tERROR: no input file!')
    try:
        xmlParseFile(filename)
        print('\n\t:), %s is OK!\n' % filename)
    except Exception as e:
        print('\n\t:(,  Error found in file:%s\n' % e)
        exit(1)
   
    #设置成功标志
    setquitflag(0)