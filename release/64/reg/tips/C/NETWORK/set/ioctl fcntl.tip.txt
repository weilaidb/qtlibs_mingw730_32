ioctl和fcntl的原型为:
int ioctl(int fd, unsigned long result, char *argp);
int fcntl(int fd, int cmd, ... /* int arg */);

描述                                                              fcntl                           ioctl
通过打开或关闭so_state中的SS_NBIO来使能或禁止非阻塞功能           FNONBLOCK文件状态标志           FIONBIO命令
通过打开或关闭sb_flags中的SB_ASYNC来使能或禁止异常通知功能        FASYNC文件状态标志              FIOASYNC命令
设置或得到so_pgid,它是SIGIOG和SIGURG信号的目标进程或进程组        F_SETOWN或F_GETOWN              SIOCSPGRP或SIOCGPGRP命令
得到接收缓存中的字节数；返回so_rcv.sb_cc                                                          FIONREAD
返回OOB同步标记；即so_state中的SS_RCVATMARK标志                                                   SIOCATMASK


ioctl命令宏
宏                  描述 
IOCPARM_LEN(cmd)    返回cmd中的length
IOCBASECMD(cmd)     length设为0的命令
IOCGROUP(cmd)       返回cmd中的group


