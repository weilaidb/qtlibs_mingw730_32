https://turbock79.cn/?p=299$NL$NLip link add \1 type vrf table \2$NLip link set dev \1 up$NL$NL##简要查看采用-br参数$NLip -br link show type vrf$NL##查看所有vrf，-d参数可以显示ID号$NLip link show type vrf$NL##To list VRFs that have been created:$NLip -d link show type vrf$NL#NOTE: The -d option is needed to show the table id$NL##为VRF分配接口$NLip link set ens37 vrf \1$NL##显示被分配给vrf的设备$NLip link show vrf \1$NLip link show master NAME$NL$NL#显示VRF的邻居条目$NLip neigh show vrf green$NL$NLTo list neighbor entries associated with devices enslaved to a VRF device$NLadd the master option to the ip command:$NLip [-6] neigh show vrf NAME$NLip [-6] neigh show master NAME$NL$NLip neigh show vrf \1$NLip -6 neigh show vrf \1$NL$NL显示VRF中地址$NLip addr show vrf green$NL##To show addresses for interfaces associated with a VRF add the master option to the ip command:$NLip addr show vrf NAME$NLip addr show master NAME$NL$NLip addr show vrf \1$NL##Or in brief format:$NLip -br addr show vrf \1$NL$NL显示VRF路由$NLTo show routes for a VRF use the ip command to display the table associated with the VRF device:$NL$NLip [-6] route show vrf NAME$NLip [-6] route show table ID$NL$NLip route show vrf \1$NLip -6 route show vrf \1$NL$NLVRF的路由查询$NLA test route lookup can be done for a VRF:$NL$ ip [-6] route get vrf NAME ADDRESS$NL$ ip [-6] route get oif NAME ADDRESS$NL$NLip route get 10.2.1.40 vrf \1$NLip -6 route get 2002:1::32 vrf \1$NL$NL将网络接口从VRF中删除$NLip link set dev ens37 nomaster$NL$NLNetwork interfaces are removed from a VRF by breaking the enslavement to the VRF device:$ ip link set dev NAME nomaster$NL$NLConnected routes are moved back to the default table and local entries are moved to the local table. For example:$NL$ ip link set dev eth0 nomaster$NL$NL$NL$NL$NL$NL$NL$NL$NL$NL